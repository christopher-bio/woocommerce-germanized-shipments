window.germanized=window.germanized||{},window.germanized.admin=window.germanized.admin||{},function(g){window.germanized.admin.shipping_provider_method={params:{},currentProvider:"",init:function(){var e=germanized.admin.shipping_provider_method;e.params=wc_gzd_admin_shipping_provider_method_params,g(document).on("change","select[id$=shipping_provider]",e.showOrHideAll).on("change gzd_show_or_hide_fields",":input:visible[id]",e.onChangeInput).on("click",".wc-gzd-shipping-provider-method-tabs .nav-tab-wrapper a.nav-tab",e.onChangeTab).on("change",".override-checkbox :input",e.onChangeOverride),g(document.body).on("wc_backbone_modal_loaded",e.onShippingMethodOpen),0<g("select[id$=shipping_provider]").length&&g("select[id$=shipping_provider]").trigger("change")},parseFieldId:function(e){return e.replace("[","_").replace("]","")},onChangeOverride:function(){germanized.admin.shipping_provider_method;var e=g(this),i=e.is(":checked"),e=e.parents(".wc-gzd-shipping-provider-override-wrapper");i?e.find(".wc-gzd-shipping-provider-override-inner-wrapper").addClass("has-override"):e.find(".wc-gzd-shipping-provider-override-inner-wrapper").removeClass("has-override")},onChangeTab:function(){germanized.admin.shipping_provider_method;var e=g(this),i=e.parents("form"),n=e.attr("href").replace("#",""),n=i.find('.wc-gzd-shipping-provider-method-tab-content[data-tab="'+n+'"]');return e.parents(".wc-gzd-shipping-provider-method-tabs").find(".nav-tab-active").removeClass("nav-tab-active"),i.find(".wc-gzd-shipping-provider-method-tab-content").removeClass("tab-content-active"),0<n.length&&(e.addClass("nav-tab-active"),n.addClass("tab-content-active"),n.find(":input:visible").trigger("change")),!1},getInputByIdOrName:function(e,i){var n=germanized.admin.shipping_provider_method;return i=n.getCleanDataId(i),e.find(":input").filter(function(){var e=n.getCleanInputId(g(this));return!!e&&n.getCleanDataId(e)===i})},getCleanInputId:function(e){var i=germanized.admin.shipping_provider_method.currentProvider,e=e.attr("id")?e.attr("id"):e.attr("name");return!!e&&(i&&0<=e.toLowerCase().indexOf("-p-"+i+"-")?e.substring(e.lastIndexOf("-p-"+i+"-"),e.length):e)},getCleanDataId:function(e){return e.toLowerCase().replace(/-/g,"")},onChangeInput:function(){var i,n,r,t,d,a,o,p,s=germanized.admin.shipping_provider_method,e=g(this),h=g(this).parents("form"),e=s.getCleanInputId(e),e=h.find(":input[data-show_if_"+g.escapeSelector(e)+"]");g.each(e,function(){for(var e in i=g(this),n=i.parents("tr"),r=i.data(),t=!0,r)if(r.hasOwnProperty(e)&&"show_if_"===e.substring(0,8)&&(p=e.replace("show_if_",""),d=s.getInputByIdOrName(h,p),a=i.data(e)?i.data(e).split(","):[],0<d.length&&(o=d.val(),p=!1,d.is(":radio")?"no"!==(o=0<d.parents("fieldset").find(":checked").length?d.parents("fieldset").find(":checked").val():"no")&&(p=!0):d.is(":checkbox")?"yes"===(o=d.is(":checked")?"yes":"no")&&(p=!0):p=undefined!==o&&"0"!==o&&""!==o,a&&0<a.length?-1===g.inArray(o,a)&&(t=!1):p||(t=!1)),!t))break;t?n.show():n.hide()})},onChangeField:function(){var e=germanized.admin.shipping_provider_method,i=g(this).parents("form"),n=e.parseFieldId(g(this).attr("id")),r=g(this).val(),e=e.currentProvider;e&&0<=n.toLowerCase().indexOf("_"+e+"_")&&(n=n.substring(n.lastIndexOf(e+"_"),n.length),i.find(":input[data-show_if_"+n+"]").parents("tr").hide(),g(this).is(":checkbox")?g(this).is(":checked")&&i.find(":input[data-show_if_"+n+"]").parents("tr").show():i.find(":input[data-show_if_"+n+'*="'+r+'"]').parents("tr").show())},onShippingMethodOpen:function(e,i){"wc-modal-shipping-method-settings"===i&&($wrapper=g(".wc-modal-shipping-method-settings"),0<g("select[id$=shipping_provider]").length&&$wrapper.find("select[id$=shipping_provider]").trigger("change"))},showOrHideAll:function(){var i=germanized.admin.shipping_provider_method,e=g(this),n=e.find("option"),r=e.parents("form");i.currentProvider=e.val(),n.each(function(){var e=g(this).val();0<e.length&&r.find("table.form-table").each(function(){0<g(this).find(":input[id*=_"+e+"_]").length&&i.hideTable(g(this))})}),r.find(".wc-gzd-shipping-provider-method-tabs").hide(),r.find(".wc-gzd-shipping-provider-method-tab-content").removeClass("tab-content-active"),0<i.currentProvider.length&&(r.find("table.form-table").each(function(){0<g(this).find(":input[id*=_"+i.currentProvider+"_]").length&&i.showTable(g(this))}),r.find('.wc-gzd-shipping-provider-method-tabs[data-provider="'+i.currentProvider+'"]').show(),r.find('.wc-gzd-shipping-provider-method-tabs[data-provider="'+i.currentProvider+'"] .nav-tab-wrapper').find("a.nav-tab:first").trigger("click"),r.find(":input[id*=_"+i.currentProvider+"_]:visible").trigger("change"))},hideTable:function(e){if(0<e.find("select[id$=shipping_provider]").length)return!1;e.prevUntil("table.form-table").hide(),e.hide()},showTable:function(e){e.prevUntil("table.form-table").show(),e.show()}},g(document).ready(function(){germanized.admin.shipping_provider_method.init()})}(jQuery);